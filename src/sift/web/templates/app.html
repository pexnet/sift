{% extends "base.html" %}
{% set disable_topnav = true %}
{% block layout_class %}workspace-layout{% endblock %}
{% block content %}
<section class="workspace" data-density="compact">
  <aside class="icon-rail">
    <a href="/app" class="rail-brand" title="Sift">S</a>
    <nav class="rail-nav">
      <a href="/app" class="rail-item active">Feeds</a>
      <a href="/app?scope_type=system&state=saved" class="rail-item">Saved</a>
      <a href="/app?scope_type=system&state=fresh" class="rail-item">Fresh</a>
      <a href="/account" class="rail-item">Account</a>
    </nav>
    <button type="button" id="theme-toggle" class="rail-theme">Theme</button>
  </aside>

  <aside class="tree-pane" id="nav-tree">
    {% include "partials/nav_tree.html" %}
  </aside>

  <section class="list-pane">
    <header class="pane-header">
      <div>
        <h1>Newsfeed</h1>
        <p class="muted">Scope: {{ query.scope_type }} Â· {{ query.state }}</p>
      </div>
      <form
        class="toolbar"
        id="article-filter-form"
        hx-get="/web/partials/article-list"
        hx-target="#article-list"
        hx-swap="innerHTML"
        hx-push-url="true"
      >
        <input type="hidden" name="scope_type" value="{{ query.scope_type }}" />
        <input type="hidden" name="scope_id" value="{{ query.scope_id or '' }}" />
        <input type="hidden" name="offset" value="{{ query.offset }}" />
        <input type="hidden" name="limit" value="{{ query.limit }}" />
        <input id="article-search" name="q" type="search" value="{{ query.q or '' }}" placeholder="Search in articles" />
        <select id="state-select" name="state" aria-label="State">
          <option value="all" {% if query.state == "all" %}selected{% endif %}>All</option>
          <option value="unread" {% if query.state == "unread" %}selected{% endif %}>Unread</option>
          <option value="saved" {% if query.state == "saved" %}selected{% endif %}>Saved</option>
          <option value="archived" {% if query.state == "archived" %}selected{% endif %}>Archived</option>
          <option value="fresh" {% if query.state == "fresh" %}selected{% endif %}>Fresh</option>
          <option value="recent" {% if query.state == "recent" %}selected{% endif %}>Recently read</option>
        </select>
        <select id="sort-select" name="sort" aria-label="Sort">
          <option value="newest" {% if query.sort == "newest" %}selected{% endif %}>Newest</option>
          <option value="oldest" {% if query.sort == "oldest" %}selected{% endif %}>Oldest</option>
          <option value="unread_first" {% if query.sort == "unread_first" %}selected{% endif %}>Unread first</option>
        </select>
        <select id="density-select" aria-label="Density">
          <option value="compact" selected>Compact</option>
          <option value="comfortable">Comfortable</option>
        </select>
      </form>
    </header>

    <div id="article-list">
      {% include "partials/article_list.html" %}
    </div>
  </section>

  <section class="reader-pane" id="article-reader">
    {% include "partials/article_reader.html" %}
  </section>
</section>
{% endblock %}
