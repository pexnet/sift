<div class="nav-section">
  <h2>System</h2>
  <ul class="nav-list">
    {% for node in navigation.systems %}
      <li>
        <a
          href="/app?scope_type=system&state={{ node.key }}"
          class="{% if query.scope_type == 'system' and query.state == node.key %}active{% endif %}"
        >
          <span>{{ node.title }}</span>
          <span class="count">{{ node.unread_count }}</span>
        </a>
      </li>
    {% endfor %}
  </ul>
</div>

<div class="nav-section">
  <h2>Folders</h2>
  {% for folder in navigation.folders %}
    <details open class="folder-group">
      <summary>
        <span>{{ folder.name }}</span>
        <span class="count">{{ folder.unread_count }}</span>
      </summary>
      <ul class="nav-list nested">
        {% for feed in folder.feeds %}
          <li>
            <a
              href="/app?scope_type=feed&scope_id={{ feed.id }}&state=all"
              class="{% if query.scope_type == 'feed' and query.scope_id and query.scope_id|string == feed.id|string %}active{% endif %}"
            >
              <span>{{ feed.title }}</span>
              <span class="count">{{ feed.unread_count }}</span>
            </a>
          </li>
        {% endfor %}
      </ul>
    </details>
  {% else %}
    <p class="muted">No folders or feeds yet.</p>
  {% endfor %}
</div>

<div class="nav-section">
  <h2>Monitoring streams</h2>
  <ul class="nav-list">
    {% for stream in navigation.streams %}
      <li>
        <a
          href="/app?scope_type=stream&scope_id={{ stream.id }}&state=all"
          class="{% if query.scope_type == 'stream' and query.scope_id and query.scope_id|string == stream.id|string %}active{% endif %}"
        >
          <span>{{ stream.name }}</span>
          <span class="count">{{ stream.unread_count }}</span>
        </a>
      </li>
    {% else %}
      <li class="muted">No streams yet.</li>
    {% endfor %}
  </ul>
</div>
